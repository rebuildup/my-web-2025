# ポートフォリオデータマネージャー ユーザーマニュアル

## 概要

このマニュアルでは、拡張されたポートフォリオデータマネージャーの使用方法について説明します.新しい機能により、複数カテゴリーの設定、タグ管理、日付の手動設定、ファイルアップロード、マークダウン編集が可能になりました.

## 目次

1. [データマネージャー操作マニュアル](#データマネージャー操作マニュアル)
2. [複数カテゴリー設定ガイド](#複数カテゴリー設定ガイド)
3. [タグ管理ガイド](#タグ管理ガイド)
4. [ファイルアップロードガイド](#ファイルアップロードガイド)
5. [マークダウン編集ガイド](#マークダウン編集ガイド)
6. [トラブルシューティング](#トラブルシューティング)

---

## データマネージャー操作マニュアル

### 基本操作

#### 新しいポートフォリオアイテムの作成

1. **データマネージャーにアクセス**
   - 管理画面から「データマネージャー」を選択
   - 「新規作成」ボタンをクリック

2. **基本情報の入力**
   - **タイトル**: 作品のタイトルを入力
   - **説明**: 作品の簡単な説明を入力
   - **ステータス**: 公開状態を選択（下書き/公開）

3. **保存**
   - 「保存」ボタンをクリックして変更を保存
   - 「キャンセル」ボタンで変更を破棄

#### 既存アイテムの編集

1. **アイテムの選択**
   - データマネージャーでアイテム一覧から編集したいアイテムを選択
   - 「編集」ボタンをクリック

2. **情報の更新**
   - 必要な項目を変更
   - 各セクションで詳細な設定を行う

3. **変更の保存**
   - 「保存」ボタンで変更を確定
   - 自動保存機能により、入力中も定期的に保存される

### データマネージャーの画面構成

```
┌─────────────────────────────────────────┐
│ ポートフォリオデータマネージャー          │
├─────────────────────────────────────────┤
│ [基本情報] [カテゴリー] [タグ] [日付]    │
│ [ファイル] [マークダウン] [プレビュー]   │
├─────────────────────────────────────────┤
│                                         │
│ 選択されたタブの内容がここに表示         │
│                                         │
├─────────────────────────────────────────┤
│ [保存] [キャンセル] [プレビュー]         │
└─────────────────────────────────────────┘
```

---

## 複数カテゴリー設定ガイド

### 複数カテゴリーとは

従来は1つの作品に1つのカテゴリーしか設定できませんでしたが、新しいシステムでは複数のカテゴリーを同時に設定できます.

### 利用可能なカテゴリー

- **develop**: 開発関連の作品
- **video**: 映像作品
- **design**: デザイン作品
- **video&design**: 映像とデザインの複合作品
- **other**: その他の作品（Allギャラリーにのみ表示）

### カテゴリーの設定方法

1. **カテゴリータブを選択**
   - データマネージャーで「カテゴリー」タブをクリック

2. **カテゴリーの選択**
   - チェックボックス形式で複数のカテゴリーを選択可能
   - 最大5つまでのカテゴリーを同時選択可能

3. **Otherカテゴリーの特別な扱い**
   - Otherカテゴリーを選択した場合、その作品はAllギャラリーにのみ表示
   - 他のカテゴリー（develop、video、design、video&design）のギャラリーには表示されない

### カテゴリー選択の例

```
☑ develop
☑ design
☐ video
☐ video&design
☐ other

→ この作品はdevelopギャラリーとdesignギャラリーの両方に表示される
```

### 注意事項

- **Otherカテゴリーの制限**: Otherカテゴリーを選択した場合、他のカテゴリーとの組み合わせは推奨されません
- **表示への影響**: 複数カテゴリーを選択した作品は、該当する全てのギャラリーに表示されます
- **重複除去**: 同じ作品が複数のギャラリーに表示される場合、適切に重複が除去されます

---

## タグ管理ガイド

### タグシステムの概要

タグは作品を分類・検索するためのキーワードです.新しいシステムでは、既存のタグを再利用したり、新しいタグを簡単に作成できます.

### タグの設定方法

1. **タグタブを選択**
   - データマネージャーで「タグ」タブをクリック

2. **既存タグの選択**
   - 既存のタグ一覧が表示される
   - クリックでタグを選択/選択解除
   - 使用頻度順またはアルファベット順で表示

3. **新しいタグの作成**
   - 入力フィールドに新しいタグ名を入力
   - Enterキーまたは「追加」ボタンで新しいタグを作成

### タグ管理画面の構成

```
┌─────────────────────────────────────────┐
│ タグ管理                                │
├─────────────────────────────────────────┤
│ 検索: [_______________] [検索]           │
├─────────────────────────────────────────┤
│ 既存のタグ:                             │
│ [React] [TypeScript] [Next.js] [CSS]    │
│ [JavaScript] [Node.js] [API] [UI/UX]    │
├─────────────────────────────────────────┤
│ 新しいタグ: [_______________] [追加]     │
├─────────────────────────────────────────┤
│ 選択中のタグ:                           │
│ • React                                 │
│ • TypeScript                            │
│ • CSS                                   │
└─────────────────────────────────────────┘
```

### タグの検索とフィルタリング

1. **タグ検索**
   - 検索フィールドにキーワードを入力
   - リアルタイムで該当するタグが絞り込まれる

2. **ソート機能**
   - 使用頻度順: よく使われるタグが上位に表示
   - アルファベット順: タグ名のアルファベット順で表示
   - 作成日順: 新しく作成されたタグが上位に表示

### タグの管理

1. **タグの編集**
   - 既存のタグ名をクリックして編集
   - 変更は即座に反映される

2. **タグの削除**
   - 使用されていないタグは削除可能
   - 削除前に確認ダイアログが表示される

3. **タグの統計**
   - 各タグの使用回数が表示される
   - 最後に使用された日付も確認可能

---

## ファイルアップロードガイド

### 拡張されたファイルアップロード機能

新しいシステムでは、従来の画像処理に加えて、変換なしでのファイルアップロードが可能になりました.

### アップロード可能なファイル形式

- **画像ファイル**: JPEG, PNG, GIF, WebP
- **マークダウンファイル**: .md
- **最大ファイルサイズ**: 50MB

### アップロードオプション

#### 1. 標準アップロード（処理あり）

- 画像の最適化とリサイズを実行
- WebP形式への変換
- サムネイル自動生成
- ファイルサイズの圧縮

#### 2. 変換なしアップロード

- オリジナルファイルをそのまま保存
- 画質の劣化なし
- ファイル形式の変更なし
- 大きなファイルサイズでも保存可能

### アップロード手順

1. **ファイルタブを選択**
   - データマネージャーで「ファイル」タブをクリック

2. **アップロードオプションの選択**

   ```
   アップロードオプション:
   ○ 標準処理（最適化・リサイズ）
   ○ 変換なし（オリジナル保持）

   追加オプション:
   ☑ オリジナルファイルも保持
   ☑ 複数サイズのバリアント生成
   ☐ ウォーターマーク追加
   ```

3. **ファイルの選択**
   - 「ファイルを選択」ボタンをクリック
   - またはドラッグ&ドロップでファイルを追加

4. **アップロードの実行**
   - 「アップロード開始」ボタンをクリック
   - プログレスバーでアップロード状況を確認

### ファイル管理

#### アップロード済みファイルの管理

```
┌─────────────────────────────────────────┐
│ アップロード済みファイル                │
├─────────────────────────────────────────┤
│ [サムネイル] image1.jpg                 │
│              オリジナル: 2.5MB          │
│              処理済み: 850KB            │
│              [削除] [置換]              │
├─────────────────────────────────────────┤
│ [サムネイル] image2.png                 │
│              変換なし: 4.2MB            │
│              [削除] [置換]              │
└─────────────────────────────────────────┘
```

#### ファイルの操作

1. **ファイルの削除**
   - 削除ボタンをクリック
   - 確認ダイアログで削除を確定

2. **ファイルの置換**
   - 置換ボタンをクリック
   - 新しいファイルを選択してアップロード

3. **ファイル情報の確認**
   - ファイル名、サイズ、形式を表示
   - アップロード日時も確認可能

### トラブルシューティング

#### アップロードエラーの対処

1. **ファイルサイズエラー**
   - エラーメッセージ: "ファイルサイズが上限を超えています"
   - 対処法: ファイルサイズを50MB以下に縮小

2. **ファイル形式エラー**
   - エラーメッセージ: "サポートされていないファイル形式です"
   - 対処法: 対応形式（JPEG, PNG, GIF, WebP, MD）に変換

3. **ネットワークエラー**
   - エラーメッセージ: "アップロードに失敗しました"
   - 対処法: インターネット接続を確認し、再試行

---

## マークダウン編集ガイド

### マークダウンエディターの概要

新しいシステムでは、長いコンテンツを外部の.mdファイルとして管理できます.専用のマークダウンエディターにより、効率的な編集が可能です.

### マークダウンエディターの機能

1. **リアルタイムプレビュー**
   - 編集内容が即座にプレビューに反映
   - サイドバイサイド表示またはタブ切り替え

2. **構文ハイライト**
   - マークダウン記法の色分け表示
   - エラーの視覚的な識別

3. **ツールバー**
   - よく使用する記法のボタン
   - ショートカットキーサポート

### エディター画面の構成

```
┌─────────────────────────────────────────┐
│ マークダウンエディター                  │
├─────────────────────────────────────────┤
│ [B] [I] [H1] [H2] [Link] [Image] [Code] │
├─────────────────────────────────────────┤
│ エディター        │ プレビュー        │
│                   │                   │
│ # タイトル        │ タイトル          │
│                   │                   │
│ 本文テキスト...   │ 本文テキスト...   │
│                   │                   │
├─────────────────────────────────────────┤
│ [保存] [プレビュー切替] [全画面]        │
└─────────────────────────────────────────┘
```

### マークダウン記法ガイド

#### 基本的な記法

```markdown
# 見出し1

## 見出し2

### 見出し3

**太字**
_斜体_
~~取り消し線~~

- リスト項目1
- リスト項目2
  - サブ項目

1. 番号付きリスト1
2. 番号付きリスト2

[リンクテキスト](URL)
![画像の説明](画像URL)

`インラインコード`
```

コードブロック

```

> 引用文
```

#### 高度な記法

```markdown
| 列1     | 列2     | 列3     |
| ------- | ------- | ------- |
| データ1 | データ2 | データ3 |

---

[^1]: 脚注の内容

チェックリスト:

- [x] 完了項目
- [ ] 未完了項目
```

### ファイル管理

#### マークダウンファイルの保存

1. **自動保存**
   - 編集中は5秒間隔で自動保存
   - 保存状況がステータスバーに表示

2. **手動保存**
   - Ctrl+S（Windows）またはCmd+S（Mac）
   - 「保存」ボタンをクリック

3. **ファイルパス**
   - ファイルは`public/data/content/markdown/portfolio/`に保存
   - ファイル名は自動生成（アイテムIDベース）

#### バージョン管理

1. **変更履歴**
   - 保存時に自動的にバックアップを作成
   - 過去のバージョンへの復元が可能

2. **復元機能**
   - 「履歴」ボタンから過去のバージョンを確認
   - 選択したバージョンに復元可能

### エディターのカスタマイズ

#### 表示設定

1. **テーマ選択**
   - ライトテーマ / ダークテーマ
   - 高コントラストモード

2. **フォント設定**
   - フォントサイズの調整
   - フォントファミリーの選択

3. **レイアウト**
   - エディター/プレビューの分割比率
   - 全画面モードの切り替え

---

## トラブルシューティング

### よくある問題と解決方法

#### 1. データが保存されない

**症状**: 編集した内容が保存されない

**原因と対処法**:

- ネットワーク接続の問題 → インターネット接続を確認
- ブラウザのキャッシュ問題 → ブラウザのキャッシュをクリア
- セッションタイムアウト → 再ログインして操作を再実行

#### 2. ファイルアップロードが失敗する

**症状**: ファイルのアップロードが完了しない

**原因と対処法**:

- ファイルサイズが大きすぎる → 50MB以下に縮小
- 対応していないファイル形式 → 対応形式に変換
- サーバーの一時的な問題 → 時間をおいて再試行

#### 3. マークダウンプレビューが表示されない

**症状**: マークダウンのプレビューが正しく表示されない

**原因と対処法**:

- 記法の間違い → マークダウン記法を確認
- ファイルの読み込みエラー → ページを再読み込み
- ブラウザの互換性問題 → 最新のブラウザを使用

#### 4. カテゴリーが正しく表示されない

**症状**: 設定したカテゴリーでギャラリーに表示されない

**原因と対処法**:

- Otherカテゴリーの制限 → Otherカテゴリーの仕様を確認
- キャッシュの問題 → ブラウザのキャッシュをクリア
- データの同期問題 → データマネージャーで再保存

#### 5. タグが検索結果に表示されない

**症状**: 作成したタグが検索で見つからない

**原因と対処法**:

- タグの保存が完了していない → 保存を確認して再検索
- 検索キーワードの間違い → 正確なタグ名で検索
- データベースの同期遅延 → 数分待ってから再検索

### エラーメッセージ一覧

#### データ保存関連

- **"保存に失敗しました"**
  - ネットワーク接続を確認
  - 再度保存を試行

- **"データの検証に失敗しました"**
  - 必須項目が入力されているか確認
  - 文字数制限を確認

#### ファイル操作関連

- **"ファイルサイズが上限を超えています"**
  - ファイルサイズを50MB以下に縮小

- **"サポートされていないファイル形式です"**
  - 対応形式（JPEG, PNG, GIF, WebP, MD）を使用

#### システム関連

- **"セッションが期限切れです"**
  - 再ログインが必要

- **"一時的なエラーが発生しました"**
  - 時間をおいて再試行
  - 問題が続く場合は管理者に連絡

### サポート情報

#### 連絡先

技術的な問題や質問がある場合は、以下の方法でサポートを受けることができます：

1. **システム管理者への連絡**
   - 緊急の問題や障害の報告

2. **ドキュメントの確認**
   - 技術ドキュメントで詳細な仕様を確認

3. **ログの確認**
   - ブラウザの開発者ツールでエラーログを確認
   - エラーメッセージをサポートに報告

#### 定期メンテナンス

システムの安定性とパフォーマンス向上のため、定期的なメンテナンスが実施されます：

- **メンテナンス時間**: 毎週日曜日 2:00-4:00 AM
- **影響**: この時間帯はシステムが利用できません
- **通知**: メンテナンス前に事前通知を行います

---

## 付録

### キーボードショートカット

#### エディター操作

- `Ctrl+S` / `Cmd+S`: 保存
- `Ctrl+Z` / `Cmd+Z`: 元に戻す
- `Ctrl+Y` / `Cmd+Y`: やり直し
- `Ctrl+F` / `Cmd+F`: 検索
- `F11`: 全画面モード切り替え

#### マークダウン記法

- `Ctrl+B` / `Cmd+B`: 太字
- `Ctrl+I` / `Cmd+I`: 斜体
- `Ctrl+K` / `Cmd+K`: リンク挿入
- `Ctrl+Shift+C` / `Cmd+Shift+C`: コードブロック

### ブラウザ対応状況

#### 推奨ブラウザ

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

#### 制限事項

- Internet Explorer はサポート対象外
- 古いバージョンのブラウザでは一部機能が制限される場合があります

### 更新履歴

- **v2.0.0** (2024-02-01): 複数カテゴリー対応、タグ管理改善
- **v2.1.0** (2024-02-15): マークダウンエディター追加
- **v2.2.0** (2024-03-01): ファイルアップロード機能拡張

---

このマニュアルは、ポートフォリオデータマネージャーの効果的な使用をサポートするために作成されました.ご不明な点がございましたら、システム管理者までお問い合わせください.
